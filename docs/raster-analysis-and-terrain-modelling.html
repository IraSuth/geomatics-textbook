<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Raster Analysis and Terrain Modelling | An Open Geomatics Textbook</title>
  <meta name="description" content="Advancing teaching and learning in geomatics at UBC" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Raster Analysis and Terrain Modelling | An Open Geomatics Textbook" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/ubc-geomatics-textbook/book/" />
  
  <meta property="og:description" content="Advancing teaching and learning in geomatics at UBC" />
  <meta name="github-repo" content="ubc-geomatics-textbook/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Raster Analysis and Terrain Modelling | An Open Geomatics Textbook" />
  
  <meta name="twitter:description" content="Advancing teaching and learning in geomatics at UBC" />
  

<meta name="author" content="UBC" />


<meta name="date" content="2021-08-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="network-analysis.html"/>
<link rel="next" href="LiDAR-acquisition-and-analysis.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Open Geomatics Textbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#contacts"><i class="fa fa-check"></i><b>0.1</b> Contacts</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#project-wiki"><i class="fa fa-check"></i><b>0.2</b> Project Wiki</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#style-guide"><i class="fa fa-check"></i><b>0.3</b> Style Guide</a><ul>
<li class="chapter" data-level="0.3.1" data-path="index.html"><a href="index.html#audience"><i class="fa fa-check"></i><b>0.3.1</b> Audience</a></li>
<li class="chapter" data-level="0.3.2" data-path="index.html"><a href="index.html#general-style"><i class="fa fa-check"></i><b>0.3.2</b> General Style</a></li>
<li class="chapter" data-level="0.3.3" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i><b>0.3.3</b> Learning Objectives</a></li>
<li class="chapter" data-level="0.3.4" data-path="index.html"><a href="index.html#summary"><i class="fa fa-check"></i><b>0.3.4</b> Summary</a></li>
<li class="chapter" data-level="0.3.5" data-path="index.html"><a href="index.html#key-terms"><i class="fa fa-check"></i><b>0.3.5</b> Key Terms</a></li>
<li class="chapter" data-level="0.3.6" data-path="index.html"><a href="index.html#headings-and-labels"><i class="fa fa-check"></i><b>0.3.6</b> Headings and Labels</a></li>
<li class="chapter" data-level="0.3.7" data-path="index.html"><a href="index.html#formulae"><i class="fa fa-check"></i><b>0.3.7</b> Formulae</a></li>
<li class="chapter" data-level="0.3.8" data-path="index.html"><a href="index.html#units"><i class="fa fa-check"></i><b>0.3.8</b> Units</a></li>
<li class="chapter" data-level="0.3.9" data-path="index.html"><a href="index.html#numbers"><i class="fa fa-check"></i><b>0.3.9</b> Numbers</a></li>
<li class="chapter" data-level="0.3.10" data-path="index.html"><a href="index.html#dates-and-times"><i class="fa fa-check"></i><b>0.3.10</b> Dates and times</a></li>
<li class="chapter" data-level="0.3.11" data-path="index.html"><a href="index.html#tables"><i class="fa fa-check"></i><b>0.3.11</b> Tables</a></li>
<li class="chapter" data-level="0.3.12" data-path="index.html"><a href="index.html#code-blocks"><i class="fa fa-check"></i><b>0.3.12</b> Code blocks</a></li>
<li class="chapter" data-level="0.3.13" data-path="index.html"><a href="index.html#abbreviations"><i class="fa fa-check"></i><b>0.3.13</b> Abbreviations</a></li>
<li class="chapter" data-level="0.3.14" data-path="index.html"><a href="index.html#initialisms"><i class="fa fa-check"></i><b>0.3.14</b> Initialisms</a></li>
<li class="chapter" data-level="0.3.15" data-path="index.html"><a href="index.html#acronyms"><i class="fa fa-check"></i><b>0.3.15</b> Acronyms</a></li>
<li class="chapter" data-level="0.3.16" data-path="index.html"><a href="index.html#punctuation"><i class="fa fa-check"></i><b>0.3.16</b> Punctuation</a></li>
<li class="chapter" data-level="0.3.17" data-path="index.html"><a href="index.html#citations"><i class="fa fa-check"></i><b>0.3.17</b> Citations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="mapping-data.html"><a href="mapping-data.html"><i class="fa fa-check"></i><b>1</b> Mapping Data</a><ul>
<li class="chapter" data-level="" data-path="mapping-data.html"><a href="mapping-data.html#key-terms-1"><i class="fa fa-check"></i>Key Terms</a></li>
<li class="chapter" data-level="1.1" data-path="mapping-data.html"><a href="mapping-data.html#introduction-to-geodesy"><i class="fa fa-check"></i><b>1.1</b> Introduction to geodesy</a></li>
<li class="chapter" data-level="1.2" data-path="mapping-data.html"><a href="mapping-data.html#models-of-earth"><i class="fa fa-check"></i><b>1.2</b> Models of Earth</a><ul>
<li class="chapter" data-level="1.2.1" data-path="mapping-data.html"><a href="mapping-data.html#geodetic-vertical-datums"><i class="fa fa-check"></i><b>1.2.1</b> Geodetic vertical datums</a></li>
<li class="chapter" data-level="1.2.2" data-path="mapping-data.html"><a href="mapping-data.html#tidal-vertical-datums"><i class="fa fa-check"></i><b>1.2.2</b> Tidal Vertical Datums</a></li>
<li class="chapter" data-level="1.2.3" data-path="mapping-data.html"><a href="mapping-data.html#gravimetric-vertical-datums"><i class="fa fa-check"></i><b>1.2.3</b> Gravimetric Vertical Datums</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="mapping-data.html"><a href="mapping-data.html#referencing-location"><i class="fa fa-check"></i><b>1.3</b> Referencing Location</a><ul>
<li class="chapter" data-level="1.3.1" data-path="mapping-data.html"><a href="mapping-data.html#cartesian-coordinate-systems"><i class="fa fa-check"></i><b>1.3.1</b> Cartesian Coordinate Systems</a></li>
<li class="chapter" data-level="1.3.2" data-path="mapping-data.html"><a href="mapping-data.html#celestial-coordinate-systems"><i class="fa fa-check"></i><b>1.3.2</b> Celestial Coordinate Systems</a></li>
<li class="chapter" data-level="1.3.3" data-path="mapping-data.html"><a href="mapping-data.html#geographic-coordinate-systems"><i class="fa fa-check"></i><b>1.3.3</b> Geographic Coordinate Systems</a></li>
<li class="chapter" data-level="1.3.4" data-path="mapping-data.html"><a href="mapping-data.html#projected-coordinate-systems"><i class="fa fa-check"></i><b>1.3.4</b> Projected Coordinate Systems</a></li>
<li class="chapter" data-level="1.3.5" data-path="mapping-data.html"><a href="mapping-data.html#measuring-map-projection-distortion"><i class="fa fa-check"></i><b>1.3.5</b> Measuring map projection distortion</a></li>
<li class="chapter" data-level="1.3.6" data-path="mapping-data.html"><a href="mapping-data.html#map-projections-for-environmental-management"><i class="fa fa-check"></i><b>1.3.6</b> Map projections for environmental management</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="mapping-data.html"><a href="mapping-data.html#summary-1"><i class="fa fa-check"></i><b>1.4</b> Summary</a><ul>
<li class="chapter" data-level="" data-path="mapping-data.html"><a href="mapping-data.html#reflection-questions"><i class="fa fa-check"></i>Reflection Questions</a></li>
<li class="chapter" data-level="" data-path="mapping-data.html"><a href="mapping-data.html#practice-questions"><i class="fa fa-check"></i>Practice Questions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="mapping-data.html"><a href="mapping-data.html#recommended-readings"><i class="fa fa-check"></i>Recommended Readings</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="relational-databases.html"><a href="relational-databases.html"><i class="fa fa-check"></i><b>2</b> Relational Databases</a><ul>
<li class="chapter" data-level="" data-path="relational-databases.html"><a href="relational-databases.html#key-terms-2"><i class="fa fa-check"></i>Key Terms</a></li>
<li class="chapter" data-level="2.1" data-path="relational-databases.html"><a href="relational-databases.html#relational-database-management-systems"><i class="fa fa-check"></i><b>2.1</b> Relational database management systems</a></li>
<li class="chapter" data-level="2.2" data-path="relational-databases.html"><a href="relational-databases.html#relational-databases-1"><i class="fa fa-check"></i><b>2.2</b> Relational databases</a></li>
<li class="chapter" data-level="2.3" data-path="relational-databases.html"><a href="relational-databases.html#relational-algebra"><i class="fa fa-check"></i><b>2.3</b> Relational algebra</a><ul>
<li class="chapter" data-level="2.3.1" data-path="relational-databases.html"><a href="relational-databases.html#selection"><i class="fa fa-check"></i><b>2.3.1</b> Selection</a></li>
<li class="chapter" data-level="2.3.2" data-path="relational-databases.html"><a href="relational-databases.html#projection"><i class="fa fa-check"></i><b>2.3.2</b> Projection</a></li>
<li class="chapter" data-level="2.3.3" data-path="relational-databases.html"><a href="relational-databases.html#rename"><i class="fa fa-check"></i><b>2.3.3</b> Rename</a></li>
<li class="chapter" data-level="2.3.4" data-path="relational-databases.html"><a href="relational-databases.html#set-union"><i class="fa fa-check"></i><b>2.3.4</b> Set Union</a></li>
<li class="chapter" data-level="2.3.5" data-path="relational-databases.html"><a href="relational-databases.html#set-intersection"><i class="fa fa-check"></i><b>2.3.5</b> Set Intersection</a></li>
<li class="chapter" data-level="2.3.6" data-path="relational-databases.html"><a href="relational-databases.html#set-difference"><i class="fa fa-check"></i><b>2.3.6</b> Set Difference</a></li>
<li class="chapter" data-level="2.3.7" data-path="relational-databases.html"><a href="relational-databases.html#cartesian-product"><i class="fa fa-check"></i><b>2.3.7</b> Cartesian Product</a></li>
<li class="chapter" data-level="2.3.8" data-path="relational-databases.html"><a href="relational-databases.html#set-divison"><i class="fa fa-check"></i><b>2.3.8</b> Set Divison</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="relational-databases.html"><a href="relational-databases.html#boolean-algebra"><i class="fa fa-check"></i><b>2.4</b> Boolean algebra</a><ul>
<li class="chapter" data-level="2.4.1" data-path="relational-databases.html"><a href="relational-databases.html#equality-operators"><i class="fa fa-check"></i><b>2.4.1</b> Equality operators</a></li>
<li class="chapter" data-level="2.4.2" data-path="relational-databases.html"><a href="relational-databases.html#conditional-operators"><i class="fa fa-check"></i><b>2.4.2</b> Conditional operators</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="relational-databases.html"><a href="relational-databases.html#joining-relations"><i class="fa fa-check"></i><b>2.5</b> Joining relations</a><ul>
<li class="chapter" data-level="2.5.1" data-path="relational-databases.html"><a href="relational-databases.html#keys"><i class="fa fa-check"></i><b>2.5.1</b> Keys</a></li>
<li class="chapter" data-level="2.5.2" data-path="relational-databases.html"><a href="relational-databases.html#natural-join"><i class="fa fa-check"></i><b>2.5.2</b> Natural Join</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="relational-databases.html"><a href="relational-databases.html#outer-join"><i class="fa fa-check"></i><b>2.6</b> Outer Join</a><ul>
<li class="chapter" data-level="2.6.1" data-path="relational-databases.html"><a href="relational-databases.html#right-and-left-outer-join"><i class="fa fa-check"></i><b>2.6.1</b> Right and Left Outer Join</a></li>
<li class="chapter" data-level="2.6.2" data-path="relational-databases.html"><a href="relational-databases.html#theta-join"><i class="fa fa-check"></i><b>2.6.2</b> Theta Join</a></li>
<li class="chapter" data-level="2.6.3" data-path="relational-databases.html"><a href="relational-databases.html#cardinality-of-joins"><i class="fa fa-check"></i><b>2.6.3</b> Cardinality of Joins</a></li>
<li class="chapter" data-level="2.6.4" data-path="relational-databases.html"><a href="relational-databases.html#structured-query-language"><i class="fa fa-check"></i><b>2.6.4</b> Structured Query Language</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="relational-databases.html"><a href="relational-databases.html#summary-2"><i class="fa fa-check"></i><b>2.7</b> Summary</a><ul>
<li class="chapter" data-level="" data-path="relational-databases.html"><a href="relational-databases.html#reflection-questions-1"><i class="fa fa-check"></i>Reflection Questions</a></li>
<li class="chapter" data-level="" data-path="relational-databases.html"><a href="relational-databases.html#practice-questions-1"><i class="fa fa-check"></i>Practice Questions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="relational-databases.html"><a href="relational-databases.html#recommended-readings-1"><i class="fa fa-check"></i>Recommended Readings</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="network-analysis.html"><a href="network-analysis.html"><i class="fa fa-check"></i><b>3</b> Network Analysis</a><ul>
<li class="chapter" data-level="" data-path="network-analysis.html"><a href="network-analysis.html#key-terms-3"><i class="fa fa-check"></i>Key Terms</a></li>
<li class="chapter" data-level="3.1" data-path="network-analysis.html"><a href="network-analysis.html#introduction-to-graph-theory"><i class="fa fa-check"></i><b>3.1</b> Introduction to graph theory</a><ul>
<li class="chapter" data-level="3.1.1" data-path="network-analysis.html"><a href="network-analysis.html#nodes"><i class="fa fa-check"></i><b>3.1.1</b> Nodes</a></li>
<li class="chapter" data-level="3.1.2" data-path="network-analysis.html"><a href="network-analysis.html#edges"><i class="fa fa-check"></i><b>3.1.2</b> Edges</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="network-analysis.html"><a href="network-analysis.html#connectivity-and-order"><i class="fa fa-check"></i><b>3.2</b> Connectivity and order</a><ul>
<li class="chapter" data-level="3.2.1" data-path="network-analysis.html"><a href="network-analysis.html#direct"><i class="fa fa-check"></i><b>3.2.1</b> Direct</a></li>
<li class="chapter" data-level="3.2.2" data-path="network-analysis.html"><a href="network-analysis.html#undirect"><i class="fa fa-check"></i><b>3.2.2</b> Undirect</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="network-analysis.html"><a href="network-analysis.html#network-topologies"><i class="fa fa-check"></i><b>3.3</b> Network topologies</a><ul>
<li class="chapter" data-level="3.3.1" data-path="network-analysis.html"><a href="network-analysis.html#physical-versus-logical-topology"><i class="fa fa-check"></i><b>3.3.1</b> Physical versus logical topology</a></li>
<li class="chapter" data-level="3.3.2" data-path="network-analysis.html"><a href="network-analysis.html#lines"><i class="fa fa-check"></i><b>3.3.2</b> Lines</a></li>
<li class="chapter" data-level="3.3.3" data-path="network-analysis.html"><a href="network-analysis.html#rings"><i class="fa fa-check"></i><b>3.3.3</b> Rings</a></li>
<li class="chapter" data-level="3.3.4" data-path="network-analysis.html"><a href="network-analysis.html#meshes"><i class="fa fa-check"></i><b>3.3.4</b> Meshes</a></li>
<li class="chapter" data-level="3.3.5" data-path="network-analysis.html"><a href="network-analysis.html#stars"><i class="fa fa-check"></i><b>3.3.5</b> Stars</a></li>
<li class="chapter" data-level="3.3.6" data-path="network-analysis.html"><a href="network-analysis.html#trees"><i class="fa fa-check"></i><b>3.3.6</b> Trees</a></li>
<li class="chapter" data-level="3.3.7" data-path="network-analysis.html"><a href="network-analysis.html#buses"><i class="fa fa-check"></i><b>3.3.7</b> Buses</a></li>
<li class="chapter" data-level="3.3.8" data-path="network-analysis.html"><a href="network-analysis.html#fully-connected"><i class="fa fa-check"></i><b>3.3.8</b> Fully connected</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="network-analysis.html"><a href="network-analysis.html#spatial-network-analysis"><i class="fa fa-check"></i><b>3.4</b> Spatial Network Analysis</a><ul>
<li class="chapter" data-level="3.4.1" data-path="network-analysis.html"><a href="network-analysis.html#network-tracing"><i class="fa fa-check"></i><b>3.4.1</b> Network tracing</a></li>
<li class="chapter" data-level="3.4.2" data-path="network-analysis.html"><a href="network-analysis.html#linear-referencing"><i class="fa fa-check"></i><b>3.4.2</b> Linear referencing</a></li>
<li class="chapter" data-level="3.4.3" data-path="network-analysis.html"><a href="network-analysis.html#routing"><i class="fa fa-check"></i><b>3.4.3</b> Routing</a></li>
<li class="chapter" data-level="3.4.4" data-path="network-analysis.html"><a href="network-analysis.html#least-cost-paths"><i class="fa fa-check"></i><b>3.4.4</b> Least cost paths</a></li>
<li class="chapter" data-level="3.4.5" data-path="network-analysis.html"><a href="network-analysis.html#least-cost-corridors"><i class="fa fa-check"></i><b>3.4.5</b> Least cost corridors</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="network-analysis.html"><a href="network-analysis.html#network-centrality"><i class="fa fa-check"></i><b>3.5</b> Network Centrality</a><ul>
<li class="chapter" data-level="3.5.1" data-path="network-analysis.html"><a href="network-analysis.html#degree-centrality"><i class="fa fa-check"></i><b>3.5.1</b> Degree centrality</a></li>
<li class="chapter" data-level="3.5.2" data-path="network-analysis.html"><a href="network-analysis.html#closeness-centrality"><i class="fa fa-check"></i><b>3.5.2</b> Closeness centrality</a></li>
<li class="chapter" data-level="3.5.3" data-path="network-analysis.html"><a href="network-analysis.html#betweenness-centrality"><i class="fa fa-check"></i><b>3.5.3</b> Betweenness centrality</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html"><i class="fa fa-check"></i><b>4</b> Raster Analysis and Terrain Modelling</a><ul>
<li class="chapter" data-level="" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#key-terms-4"><i class="fa fa-check"></i>Key Terms</a></li>
<li class="chapter" data-level="4.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#raster-analysis"><i class="fa fa-check"></i><b>4.1</b> Raster analysis</a><ul>
<li class="chapter" data-level="4.1.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#base-data"><i class="fa fa-check"></i><b>4.1.1</b> Base data</a></li>
<li class="chapter" data-level="4.1.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#derived-data"><i class="fa fa-check"></i><b>4.1.2</b> Derived data</a></li>
<li class="chapter" data-level="4.1.3" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#classified-data"><i class="fa fa-check"></i><b>4.1.3</b> Classified data</a></li>
<li class="chapter" data-level="4.1.4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#combined-data"><i class="fa fa-check"></i><b>4.1.4</b> Combined data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#digital-vertical-models"><i class="fa fa-check"></i><b>4.2</b> Digital vertical models</a><ul>
<li class="chapter" data-level="4.2.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#digital-elevation-models-dem"><i class="fa fa-check"></i><b>4.2.1</b> Digital Elevation Models (DEM)</a></li>
<li class="chapter" data-level="4.2.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#digital-terrain-models-dtm"><i class="fa fa-check"></i><b>4.2.2</b> Digital Terrain Models (DTM)</a></li>
<li class="chapter" data-level="4.2.3" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#digital-surface-models-dsm"><i class="fa fa-check"></i><b>4.2.3</b> Digital Surface Models (DSM)</a></li>
<li class="chapter" data-level="4.2.4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#contours"><i class="fa fa-check"></i><b>4.2.4</b> Contours</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#raster-functions"><i class="fa fa-check"></i><b>4.3</b> Raster functions</a><ul>
<li class="chapter" data-level="4.3.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#local"><i class="fa fa-check"></i><b>4.3.1</b> Local</a></li>
<li class="chapter" data-level="4.3.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#focal"><i class="fa fa-check"></i><b>4.3.2</b> Focal</a></li>
<li class="chapter" data-level="4.3.3" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#global"><i class="fa fa-check"></i><b>4.3.3</b> Global</a></li>
<li class="chapter" data-level="4.3.4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#zonal"><i class="fa fa-check"></i><b>4.3.4</b> Zonal</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#derivatives-of-elevation-models"><i class="fa fa-check"></i><b>4.4</b> Derivatives of elevation models</a><ul>
<li class="chapter" data-level="4.4.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#slope"><i class="fa fa-check"></i><b>4.4.1</b> Slope</a></li>
<li class="chapter" data-level="4.4.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#aspect"><i class="fa fa-check"></i><b>4.4.2</b> Aspect</a></li>
<li class="chapter" data-level="4.4.3" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#heat-load-index"><i class="fa fa-check"></i><b>4.4.3</b> Heat load index</a></li>
<li class="chapter" data-level="4.4.4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#hillshade"><i class="fa fa-check"></i><b>4.4.4</b> Hillshade</a></li>
<li class="chapter" data-level="4.4.5" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#sinks-peaks-and-saddles-oh-my"><i class="fa fa-check"></i><b>4.4.5</b> Sinks, peaks, and saddles oh my!</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#landform-classification"><i class="fa fa-check"></i><b>4.5</b> Landform classification</a><ul>
<li class="chapter" data-level="4.5.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#profile-and-planform-curvature"><i class="fa fa-check"></i><b>4.5.1</b> Profile and Planform curvature</a></li>
<li class="chapter" data-level="4.5.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#topographic-position-index"><i class="fa fa-check"></i><b>4.5.2</b> Topographic position index</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#hydrology-workflows"><i class="fa fa-check"></i><b>4.6</b> Hydrology work“flows”</a><ul>
<li class="chapter" data-level="4.6.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#flow-direction-and-flow-accumulation"><i class="fa fa-check"></i><b>4.6.1</b> Flow direction and flow accumulation</a></li>
<li class="chapter" data-level="4.6.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#flow-length"><i class="fa fa-check"></i><b>4.6.2</b> Flow length</a></li>
<li class="chapter" data-level="4.6.3" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#stream-delineation"><i class="fa fa-check"></i><b>4.6.3</b> Stream delineation</a></li>
<li class="chapter" data-level="4.6.4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#stream-order"><i class="fa fa-check"></i><b>4.6.4</b> Stream order</a></li>
<li class="chapter" data-level="4.6.5" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#pour-points"><i class="fa fa-check"></i><b>4.6.5</b> Pour points</a></li>
<li class="chapter" data-level="4.6.6" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#watershed-delineation"><i class="fa fa-check"></i><b>4.6.6</b> Watershed delineation</a></li>
<li class="chapter" data-level="4.6.7" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#topographic-wetness-index"><i class="fa fa-check"></i><b>4.6.7</b> Topographic wetness index</a></li>
<li class="chapter" data-level="4.6.8" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#case-study-here"><i class="fa fa-check"></i><b>4.6.8</b> Case Study Here</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#geovisualization"><i class="fa fa-check"></i><b>4.7</b> Geovisualization</a><ul>
<li class="chapter" data-level="4.7.1" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#anaglyphs"><i class="fa fa-check"></i><b>4.7.1</b> Anaglyphs</a></li>
<li class="chapter" data-level="4.7.2" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#viewsheds"><i class="fa fa-check"></i><b>4.7.2</b> Viewsheds</a></li>
<li class="chapter" data-level="4.7.3" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#extrusion"><i class="fa fa-check"></i><b>4.7.3</b> Extrusion</a></li>
<li class="chapter" data-level="4.7.4" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#exaggeration"><i class="fa fa-check"></i><b>4.7.4</b> Exaggeration</a></li>
<li class="chapter" data-level="4.7.5" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#lighting-and-shadowing"><i class="fa fa-check"></i><b>4.7.5</b> Lighting and shadowing</a></li>
<li class="chapter" data-level="4.7.6" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#symbologies-for-relief"><i class="fa fa-check"></i><b>4.7.6</b> Symbologies for relief</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#summary-3"><i class="fa fa-check"></i><b>4.8</b> Summary</a><ul>
<li class="chapter" data-level="" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#reflection-questions-2"><i class="fa fa-check"></i>Reflection Questions</a></li>
<li class="chapter" data-level="" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#practice-questions-2"><i class="fa fa-check"></i>Practice Questions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="raster-analysis-and-terrain-modelling.html"><a href="raster-analysis-and-terrain-modelling.html#recommended-readings-2"><i class="fa fa-check"></i>Recommended Readings</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html"><i class="fa fa-check"></i><b>5</b> LiDAR Acquisition and Analysis</a><ul>
<li class="chapter" data-level="" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#key-terms-5"><i class="fa fa-check"></i>Key Terms</a></li>
<li class="chapter" data-level="5.1" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#what-is-lidar"><i class="fa fa-check"></i><b>5.1</b> What is LiDAR?</a><ul>
<li class="chapter" data-level="5.1.1" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#how-does-it-work"><i class="fa fa-check"></i><b>5.1.1</b> How does it Work?</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#components-of-lidar-systems"><i class="fa fa-check"></i><b>5.2</b> Components of LiDAR Systems</a><ul>
<li class="chapter" data-level="5.2.1" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#lasers"><i class="fa fa-check"></i><b>5.2.1</b> Lasers</a></li>
<li class="chapter" data-level="5.2.2" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#position-and-orientation"><i class="fa fa-check"></i><b>5.2.2</b> Position and Orientation</a></li>
<li class="chapter" data-level="5.2.3" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#platform"><i class="fa fa-check"></i><b>5.2.3</b> Platform</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#types-of-lidar"><i class="fa fa-check"></i><b>5.3</b> Types of LiDAR</a><ul>
<li class="chapter" data-level="5.3.1" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#discrete-return"><i class="fa fa-check"></i><b>5.3.1</b> Discrete Return</a></li>
<li class="chapter" data-level="5.3.2" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#full-waveform"><i class="fa fa-check"></i><b>5.3.2</b> Full Waveform</a></li>
<li class="chapter" data-level="5.3.3" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#multispectral"><i class="fa fa-check"></i><b>5.3.3</b> Multispectral</a></li>
<li class="chapter" data-level="5.3.4" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#single-photon-lidar"><i class="fa fa-check"></i><b>5.3.4</b> Single Photon Lidar</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#lidar-derivatives-and-analysis"><i class="fa fa-check"></i><b>5.4</b> LiDAR Derivatives and Analysis</a><ul>
<li class="chapter" data-level="5.4.1" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#bare-earth-elevation"><i class="fa fa-check"></i><b>5.4.1</b> Bare Earth Elevation</a></li>
<li class="chapter" data-level="5.4.2" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#canopy-height-model"><i class="fa fa-check"></i><b>5.4.2</b> Canopy Height Model</a></li>
<li class="chapter" data-level="5.4.3" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#canopy-surface-model"><i class="fa fa-check"></i><b>5.4.3</b> Canopy Surface Model</a></li>
<li class="chapter" data-level="5.4.4" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#grid-metrics"><i class="fa fa-check"></i><b>5.4.4</b> Grid Metrics</a></li>
<li class="chapter" data-level="5.4.5" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#tree-segmentation"><i class="fa fa-check"></i><b>5.4.5</b> Tree Segmentation</a></li>
<li class="chapter" data-level="5.4.6" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#software"><i class="fa fa-check"></i><b>5.4.6</b> Software</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#summary-4"><i class="fa fa-check"></i><b>5.5</b> Summary</a><ul>
<li class="chapter" data-level="" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#reflection-questions-3"><i class="fa fa-check"></i>Reflection Questions</a></li>
<li class="chapter" data-level="" data-path="LiDAR-acquisition-and-analysis.html"><a href="LiDAR-acquisition-and-analysis.html#practice-questions-3"><i class="fa fa-check"></i>Practice Questions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Open Geomatics Textbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="raster-analysis-and-terrain-modelling" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Raster Analysis and Terrain Modelling</h1>
<p>Elevation data are frequently collected in a raster format. In this chapter, we will look at how rasters can be analyzed with a specific focus on deriving terrain information from elevation rasters. We will explore some useful properties of the raster structure that can be exploited for insightful analysis of land and water alike. Image-based raster analysis will be a later topic of Chapter 14.</p>
<div class="box-content learning-objectives-content">
<div class="box-title learning-objectives-top">
<h4 id="learning-objectives-4" class="unnumbered">Learning Objectives</h4>
</div>
<ol style="list-style-type: decimal">
<li>Understand the principles of raster analysis</li>
<li>Recognize the types of digital vertical models and their uses</li>
<li>Synthesize the terrain and hydrological information that can be derived from a digital elevation model</li>
<li>Apply raster functions in terrain and hydrology workflows</li>
<li>Visualize terrain with 3D geovisualization methods</li>
</ol>
</div>
<div id="key-terms-4" class="section level3 unnumbered">
<h3>Key Terms</h3>
<p>Digital Elevation Model, Digital Vertical Model, Digital Terrain Model, Digital Surface Model, Anaglyph,</p>
</div>
<div id="raster-analysis" class="section level2">
<h2><span class="header-section-number">4.1</span> Raster analysis</h2>
<div id="base-data" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Base data</h3>
</div>
<div id="derived-data" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Derived data</h3>
</div>
<div id="classified-data" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Classified data</h3>
</div>
<div id="combined-data" class="section level3">
<h3><span class="header-section-number">4.1.4</span> Combined data</h3>
</div>
</div>
<div id="digital-vertical-models" class="section level2">
<h2><span class="header-section-number">4.2</span> Digital vertical models</h2>
<pre><code>## Loading required package: sp</code></pre>
<div id="digital-elevation-models-dem" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Digital Elevation Models (DEM)</h3>
<p>As the name suggests, a <strong>Digital Elevation Model (DEM)</strong> is a digital representation of elevation data or heights above a vertical datum. We call it a <em>model</em> because, as you know from reading Chapter 3, all spatial data formats are inherently spatial data models. As is the case for all rasters, DEMs represent sampled data. That is, the elevations that are represented continuously in the raster DEM are in fact samples of elevation at the raster cell centres. For this reason, a DEM is a model that is simplifying elevation to some degree depending on the cell size.</p>
<p>Figure 9.X shows a DEM for Mount Assiniboine near the Alberta and British Columbia border. Mount Assiniboine has a distinctive pyramidal peak that is not immediately apparent from the bird’s-eye view of a DEM. It is common to see DEMs displayed in this black and white colour scheme, where black represents lower elevations and white represents higher elevations. Can you tell where the peak is? We will look at more sophisticated colour schemes and geovisualizations of terrain in a later section.</p>
<p><img src="images/09-00-mount-assiniboine-dem.png" class="center" alt="Figure 9.X Digital Elevation Model of Mount Assiniboine at the border of Alberta and British Columbia, Canada. Data from Canadian Digital Elevation Model." />
Figure 9.X shows another DEM, but this time for some the flattest terrain in Canada over 1,600 km away from Mount Assiniboine on the Canadian Shield at the mouth of the Nelson River in Manitoba. The Nelson River drains an area of more than 1 million km^2 of land across much of the Canadian prairie provinces and pours into Hudson Bay. The Canadian Shield is home to the oldest terrain on Earth and millions of years of erosion have reduced it to rolling hills and flattened horizons.</p>
<div class="figure">
<img src="images/09-00-nelson-river-dem.png" class="center" alt="" />
<p class="caption">Figure 9.X Digital Elevation Model of Nelson River pouring into Hudson Bay, Manitoba, Canada. Data from Shuttle Radar Topography Mission .</p>
</div>
<p>Over an entire extent of 3,300 km^2, the Nelson River DEM in Figure 9.X only varies by 44 m. Compare that with the 1,328 m of difference from the white peak of Mount Assiniboine to the black valleys of the Rocky Mountains over about 5 km^2 in Figure 9.X. Throughout the remainder of this chapter, we will look at raster analysis applied to these two extreme examples of terrain.</p>
</div>
<div id="digital-terrain-models-dtm" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Digital Terrain Models (DTM)</h3>
<p>A <strong>Digital Terrain Model (DTM)</strong> represents elevation through points and lines and is often erroneously confused with a DEM. The vector-based data format allows elevation to be sampled at a higher density in areas where elevation changes quickly in space (e.g., Mount Assiniboine) and at lower density in areas where elevation changes gradually (e.g., Nelson River). Lines can be used to model mountain ridges, river banks, fault lines, and coast lines where elevation might be constant and it would be useful to represent the elevation as a line feature instead of a point of elevation. It is important to recognize that DTMs can be converted to DEMs through a process of interpolation (more on that in Chapter 10), but a DEM cannot be converted to a DTM because a DEM is a regular grid or equally-spaced elevation samples.</p>
</div>
<div id="digital-surface-models-dsm" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Digital Surface Models (DSM)</h3>
<p>Up to this point, we have been looking digital vertical models of <em>bare Earth</em>, that is, just plain old elevation of terrain above a vertical datum. If you want to represent the height of features above the bare Earth, like houses and trees, then you would need to use a <strong>Digital Surface Model (DSM)</strong>. Whereas a DTM and DEM both represent elevation above a vertical datum, which is usually mean sea level represented by the geoid, a DSM represents height above a DTM or DEM. In this way, we can model features on the surface and their heights. We will look at more examples of working with DSMs in Chapter 15.</p>
</div>
<div id="contours" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Contours</h3>
</div>
</div>
<div id="raster-functions" class="section level2">
<h2><span class="header-section-number">4.3</span> Raster functions</h2>
<p>Raster functions are algorithms that perform operations on one or more cells of the raster to produce new calculations or derivatives. In the following sections we will explore four commonly used raster functions: local, focal, global, and zonal.</p>
<div id="local" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Local</h3>
<p>A <strong>local function</strong> is the simplest to understand because each cell in the input raster is operated on independently of all other cells. Simple arithmetic operations such as addition, subtraction, division, and multiplication are all examples of focal functions when applied to a raster.</p>
<p><img src="open-geomatics-textbook_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="focal" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Focal</h3>
<p>A <strong>focal function</strong> takes full advantage of the raster data model by moving a window or kernel over the raster in order to calculate new values. The kernel must always be a square with odd-numbered dimensions such as 3x3 or 11x11. This ensures that there is a focal cell at the centre of the kernel that determines which cell in the output will take on the value of the operation. In practice, the kernel is moved column-by-column, row-by-row over the entire raster and a calculation is performed using the values of the input raster that coincide with the kernel. The kernel itself is also comprised of weights that, when multiplied against the input raster at a given location, yields a set of values that can be summed or averaged. Thus, the operation of the focal function can take many different forms such as calculating the mean, minimum, maximum or any other operation over the kernel. As a simple example, a mean focal function with a 3x3 kernel will calculate the mean value of all 3x3 cell neighborhoods in the raster yielding the result below.</p>
<p><img src="open-geomatics-textbook_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Mathematically, the weights of the 3x3 kernel are all 1’s so that when it is multiplied against a particular location on the input raster the values of the input raster are returned.</p>
<p><span class="math display">\[k = \begin{bmatrix}1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1
\end{bmatrix}\]</span></p>
<p>The mean is then calculated by adding all the values together and dividing by the number of cells in the kernel. You will see that our input raster has shrunk down from dimensions of 5x5 to 3x3 after applying the 3x3 kernel. This is due to the fact that there are insufficient cells along the edge and corners of the raster to divide by the number of cells in the kernel. One solution is to use padding, which simply adds 0’s along the outside of the input raster. Padding is not always an elegant solution because you will still have edge effects, but you will at least maintain the dimensions of your input raster in the output. Below is the result of the same focal function, but with padding of 0’s.</p>
<p><img src="open-geomatics-textbook_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>You might recognize that a mean focal function has the property of smoothing out the variation in extreme values from cell-to-cell in the input raster. In fact, a mean focal function is special and also known as a <strong>low-pass filter</strong>, which has the effect of “blurring” a raster or image. On the other hand, we can apply a <strong>high-pass filter</strong> that performs edge enhancement. The kernel of a high-pass filter takes on a specific pattern of weights that usually involves a large weight to the focal (centre) cell of the kernel and negative weights to the neighbouring cells. Below is a common example of a high-pass kernel:</p>
<p><span class="math display">\[k = \begin{bmatrix}-0.7 &amp; -1 &amp; -0.7\\
-1 &amp; 6.8 &amp; -1\\
-0.7 &amp; -1 &amp; -0.7
\end{bmatrix}\]</span></p>
<p>The operation of a high-pass filter is to multiply the kernel weights above against the input raster cell values and then sum the result. The following is the result of applying the high-pass kernel weights above to our input raster with padding:</p>
<p><img src="open-geomatics-textbook_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="global" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Global</h3>
<p><strong>Global functions</strong> apply some operation to all cells in the raster. These are usually simply referred to as summary statistics of the raster since we usually want to know what the minimum, maximum, and average values are of all cells in a given raster. As a result, global functions do not return a raster as an output, but rather individual values, depending on the operation. Below are the summary statistics for our input raster:</p>
<table>
<thead>
<tr class="header">
<th align="left">Operation</th>
<th align="right">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Minimum</td>
<td align="right">42.00000</td>
</tr>
<tr class="even">
<td align="left">Maximum</td>
<td align="right">246.00000</td>
</tr>
<tr class="odd">
<td align="left">Mean</td>
<td align="right">151.00000</td>
</tr>
<tr class="even">
<td align="left">Standard Deviation</td>
<td align="right">59.47408</td>
</tr>
</tbody>
</table>
</div>
<div id="zonal" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Zonal</h3>
<p>Lastly, <strong>zonal functions</strong> perform an operation over some subset of cells defined by a zonal raster. Again, the operation can be any calculation of interest: mean, minimum, sum, etc. Zonal functions are useful for deriving information over different regions of a raster that share some thematic classification like land cover, ecosystem type, or jurisdiction. Suppose we have the following input raster and zonal raster:</p>
<p><img src="open-geomatics-textbook_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Like a global function, zonal functions do not return an output raster, but rather individual values for each zone:</p>
<table>
<thead>
<tr class="header">
<th align="right">Zone</th>
<th align="right">Minimum</th>
<th align="right">Maximum</th>
<th align="right">Mean</th>
<th align="right">Standard.Deviation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">42</td>
<td align="right">246</td>
<td align="right">168.2500</td>
<td align="right">70.02806</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">66</td>
<td align="right">234</td>
<td align="right">150.1111</td>
<td align="right">59.32210</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">44</td>
<td align="right">188</td>
<td align="right">134.7500</td>
<td align="right">50.58444</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="derivatives-of-elevation-models" class="section level2">
<h2><span class="header-section-number">4.4</span> Derivatives of elevation models</h2>
<p>You can probably recognize by now that if we apply a raster function to a DEM, then there is a lot of derived information that we can exploit in a raster analysis of terrain. These are further classified as first order, second order, and compound terrain derivatives. In this next section we will explore several common derivatives of a DEM and, importantly, we will see how they appear differently in the flat terrain of Nelson River and the rugged terrain of Mount Assiniboine.</p>
<div id="slope" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Slope</h3>
<p><strong>Slope</strong> is a first order terrain derivative using a focal raster function that represents the change in elevation over the distance of a cell edge. Slope can be expressed as a percentage or as angular degrees. As a percentage, a 0% slope would represent flat terrain and a 150% slope would represent steep terrain. It is worth pointing out that there is no upper bound for expressing slope as a percentage, but angular degrees are limited by an upper bound of 90°. It is mathematically impossible to achieve a slope of exactly 90° from a raster DEM because the cell size of a raster must always be great than 0 and a 90° angle would only be possible if two cells overlaid one another in the same raster, hence the impossibility. Slope is a derivative that is usually necessary in order to calculate other terrain derivatives.</p>
<p>Figure 9.X shows the slope of Mount Assiniboine where red represents steeper slopes and green represents flatter slopes. For the Mount Assiniboine DEM, the slope values range from 2° at the flattest to 80° at the steepest. Can you see the peak yet?</p>
<p><img src="images/09-00-mount-assiniboine-slope.png" class="center" alt="Figure 9.X Slope of Mount Assiniboine at the border of Alberta and British Columbia, Canada. Data from Canadian Digital Elevation Model." />
Figure 9.X shows the slope of Nelson River pouring into Hudson Bay. Again, red is steeper and green is flatter, but the slope values here only range from 0° to 9° and the vast majority of cells are less than 2°. Very flat terrain that can hardly be distinguished from the sea.</p>
<div class="figure">
<img src="images/09-00-nelson-river-slope.png" class="center" alt="" />
<p class="caption">Figure 9.X Slope of Nelson River pouring into Hudson Bay, Manitoba, Canada. Data from Shuttle Radar Topography Mission .</p>
</div>
</div>
<div id="aspect" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Aspect</h3>
<p><strong>Aspect</strong> is another first order terrain derivative that represents the azimuthal direction that a slope faces. For example, an azimuth of 0° is North-facing slope, 90° is East-facing, 180° is South-facing, and 270° is West-facing with all other azimuths in between. Typically, aspect is most apparent when azimuths are dominate throughout the DEM. For example, the slope aspects are clearly visible in Figure 9.X showing Mount Assiniboine. By contrast, when slopes are very flat as is the case for the Nelson River, aspect can alternate frequently and produce a nearly random sequence except for the relatively steeper south bank of the river shown in Figure 9.X. It is possible to have an undefined aspect when the slope is 0°, which is the case for water seen coloured grey in Figure 9.X.</p>
<p><img src="images/09-00-mount-assiniboine-aspect.png" class="center" alt="Figure 9.X Aspect of Mount Assiniboine at the border of Alberta and British Columbia, Canada. Data from Canadian Digital Elevation Model." />
<img src="images/09-00-nelson-river-aspect.png" class="center" alt="Figure 9.X Aspect of Nelson River pouring into Hudson Bay, Manitoba, Canada. Data from Shuttle Radar Topography Mission ." /></p>
</div>
<div id="heat-load-index" class="section level3">
<h3><span class="header-section-number">4.4.3</span> Heat load index</h3>
<p>One important derivative from aspect is a <strong>heat load index (HLI)</strong>, which quantifies the heat from incident solar radiation on a slope. There are several variations for computing the heat load on terrain, but a commonly used calculation is the HLI proposed by McCune and Keon (2002):</p>
<p><span class="math display">\[
HLI=\frac{1-cos(aspect-45)}{2}
\]</span></p>
<p>If you imagine aspect represented by azimuths of a circle, then this calculation has the effect of “folding” that circle in half along the 45° azimuth (northeast-southwest) so that southwest-facing slopes have higher values and northeast-facing slopes have lower values. Although both southeast- and southwest-facing slopes theoretically receive the same amount of incident solar radiation, this heat load index reflects the fact that southwest-facing slopes will be significantly hotter and drier, which can help inform vegetation potential and fuel moisture content.</p>
<div class="figure">
<img src="images/09-00-mount-assiniboine-nelson-river-heat-load-index.png" class="center" alt="" />
<p class="caption">Figure 9.X Comparing Heat Load Index (HLI) for Mount Assiniboine and the Nelson River. Data from Canadian Digital Elevation Model and MAXAR, respectively.</p>
</div>
</div>
<div id="hillshade" class="section level3">
<h3><span class="header-section-number">4.4.4</span> Hillshade</h3>
<p>A <strong>hillshade</strong> is a DEM with a simulated light source. The values in a hillshade represent the illumination of that cell given its slope, aspect, and position in the raster relative to a simulated light source. The light source has an elevation and azimuth that can be defined to reflect a particular time of day. Thus, hillshades can be useful to show a more 3-dimensional view of terrain from the bird’s-eye view of the DEM. Hillshades can also reveal fine differences in terrain that are not apparent from a simple DEM. Figure 9.X animates (online) a series of hillshades created with azimuths at 10° intervals from 0° to 350° with a light source at an elevation of 45° for Mount Assiniboine. This has the effect of rotating an approximately 9 AM high Sun on the solstice around Mount Assiniboine.</p>
<div class="figure">
<img src="images/09-00-mount-assiniboine-hillshade-animation.gif" class="center" alt="" />
<p class="caption">Figure 9.X Hillshade of Mount Assiniboine at the border of Alberta and British Columbia, Canada. Data from Canadian Digital Elevation Model. Online version is animated across all azimuths from 0° to 350° by 10° intervals.</p>
</div>
<p>A hillshade is still a 2D raster with 3D features simulated through an illumination process. A hillshade does not reveal much for flatter terrain since there is not much variation in slopes across the entire raster, as can be seen in Figure 9.X for Nelson River, which is also animated in the same way as Figure 9.X. As you can see, there is no change over the water of the river and Hudson Bay where slope is 0° and aspect is undefined and only some minor terrain features are apparent over the land. Still, if you watch closely, some finer scale features can be made apparent that are not otherwise visible from the original DEM and other terrain derivatives.</p>
<div class="figure">
<img src="images/09-00-nelson-river-hillshade-animation.gif" class="center" alt="" />
<p class="caption">Figure 9.X Hillshade of Nelson River pouring into Hudson Bay, Manitoba, Canada. Data from Shuttle Radar Topography Mission. Online version is animated across azimuths from 0° to 350° by 10° intervals.</p>
</div>
</div>
<div id="sinks-peaks-and-saddles-oh-my" class="section level3">
<h3><span class="header-section-number">4.4.5</span> Sinks, peaks, and saddles oh my!</h3>
<p><strong>Sinks</strong> are depressions in a DEM where the focal cell is surrounded by eight neighbouring cells with higher elevations (Figure 9.X). Sinks are often naturally occurring (e.g., lakes, ponds, and wetlands), but can also be due to random error, elevation precision, DEM cell size, or other pre-processing that may have been applied to the DEM such as mosaicking. The problem with sinks when modeling runoff is that water will enter the cell, but will not be able to exit in any direction, so they must be filled prior to using a DEM in any hydrology workflow.</p>
<div class="figure">
<img src="images/09-00-sink.png" class="center" alt="" />
<p class="caption">Figure 9.X Sink</p>
</div>
<p><strong>Peaks</strong> are the opposite of sinks, where a focal cell is surrounded by eight neighbouring cells that share the same lower elevation (Figure 9.X). Like sinks, peaks are also naturally occurring (e.g., mountain peaks and ridge lines) and may also be artifacts of data resolution and processing.</p>
<div class="figure">
<img src="images/09-00-peak.png" class="center" alt="" />
<p class="caption">Figure 9.X Peak</p>
</div>
<p><strong>Saddles</strong> occur when a lowland is bounded by two or more peaks (Figure 9.X). Usually, saddles identify a divide between drainage basins because they often occur along ridgelines and precipitation will runoff into one or the other drainage basin, but not both.</p>
<div class="figure">
<img src="images/09-00-saddle.png" class="center" alt="" />
<p class="caption">Figure 9.X Saddle</p>
</div>
</div>
</div>
<div id="landform-classification" class="section level2">
<h2><span class="header-section-number">4.5</span> Landform classification</h2>
<p>One of the motivations for deriving information from a DEM is to classify terrestrial landforms. Some of the derived information we have seen so far, like slope, can be used to classify landforms, but slope does not inform on geographic position. For example, a low slope value could be a plateau on top of a mountain or a river in a valley bottom. Therefore, we need more contextual information beyond these first or second terrain derivatives that we have looked at so far. There are two popular ways to derive these complex terrain derivatives by calculating terrain curvature and topographic position indices, which is what we will explore next.</p>
<div id="profile-and-planform-curvature" class="section level3">
<h3><span class="header-section-number">4.5.1</span> Profile and Planform curvature</h3>
<p>Curvature of terrain is described as convex, flat, or concave, which impacts the flow acceleration or deceleration of runoff over the terrain. There are two components of terrain curvature representing the x- and y-axes of geographic space. <strong>Profile curvature</strong> describes the downslope curvature while <strong>plan or planform curvature</strong> describes the curvature that is perpendicular to the downslope curvature. In this way, the vertical expression of terrain can be described by two, perpendicular curves. Figure 9.X illustrates the nine different combinations of profile and planform curvature.</p>
<p><img src="images/09-00-stacked-profile-planform.png" class="center" alt="Figure 9.X Conceptual diagram showing surfaces of all combinations of profile and planform curvature." />
There are many ways to calculate curvature, which usually take the form of a polynomial that is fit by a focal function over some neighbourhood of pixels. A 3x3 kernel is typically used to calculate profile and planform curvature, however, it is also common to increase the kernel size to counteract the effect of noise in high resolution DEMs. Figure 9.X illustrates examples of 3x3 kernels for each of the profile and planform curvature combinations. You might recognize variations of sinks, peaks, and saddles amongst the examples, which are of course not exhaustive of all possible elevation value combinations, but they are otherwise representative of the primary patterns that are indicated by profile and planform curvature.</p>
<div class="figure">
<img src="images/09-00-stacked-profile-planform-kernel.png" class="center" alt="" />
<p class="caption">Figure 9.X Conceptual diagram showing 3x3 kernel examples of all combinations of profile and planform curvature.</p>
</div>
<p>Both profile and planform curvature are calculated as continuous floating point integers where: positive values represent convex curvature in the profile and concave curvature in the planform; zero represents no curvature; and negative values represent concave curvature in the profile and convex curvature in the planform. Figure 9.X shows the profile and planform curvature for Mount Assiniboine. What landforms can you start to identify from terrain curvature? Can you identify any sinks, peaks, or saddles in the DEM?</p>
<div class="figure">
<img src="images/09-00-mount-assiniboine-profile-planform-curvature.png" class="center" alt="" />
<p class="caption">Figure 9.X Profile and planform curvature for Mount Assiniboine at the border of Alberta and British Columbia, Canada. Data from Canadian Digital Elevation Model.</p>
</div>
</div>
<div id="topographic-position-index" class="section level3">
<h3><span class="header-section-number">4.5.2</span> Topographic position index</h3>
<p>Another way to derive and classify landforms is through the use of a <strong>topographic position index (TPI)</strong>, which is a focal function that accounts for the difference between the focal cell elevation and the average elevation of the eight neighbouring cells (in the case of a 3x3 kernel). Therefore, positive TPI values indicate ridges or peaks, zero indicates either a constant slope or a flat area or a saddle, and negative TPI values indicate a valley or sink. Figure 9.X shows the TPI for Mount Assiniboine compared with the Nelson River. The TPI is sometimes also referred to as a terrain ruggedness index and there are other variations for calculating it as well (e.g., computing the standard score of the focal cell instead of the mean difference).</p>
<div class="figure">
<img src="images/09-00-mount-assiniboine-nelson-river-topographic-position-index.png" class="center" alt="" />
<p class="caption">Figure 9.X Comparing Topographic Position Index (TPI) for Mount Assiniboine and the Nelson River. Data from Canadian Digital Elevation Model and MAXAR, respectively.</p>
</div>
</div>
</div>
<div id="hydrology-workflows" class="section level2">
<h2><span class="header-section-number">4.6</span> Hydrology work“flows”</h2>
<p>By now, you should recognize that water can be modelled over a DEM by making the simple assumption that water will flow from higher elevations to lower elevations. We can undertake this modelling using a DEM because the continuous surface of elevation values can represent the runoff process. In this next section, we will look at how we can extract everything from runoff accumulation to stream networks and watersheds from a DEM.</p>
<div id="flow-direction-and-flow-accumulation" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Flow direction and flow accumulation</h3>
<p>Runoff is the most fundamental process that can be modelled from a DEM. In fact, modelling runoff supports nearly every subsequent derived hydrological variable of interest (e.g., flow accumulation, stream order, and watersheds). The principle assumption is that water flows from higher elevations to lower elevations. So the first step in any hydrological workflow is to calculate <strong>flow direction</strong> or the path that water will flow given precipitation over a focal cell in the DEM. This is made possible because we also know the eight neighbouring cell elevations. Thus, flow direction is a focal function that answers the simple question, <em>which neighbouring cell has the lowest elevation?</em> With only eight neighbours, runoff can only travel in eight unique azimuths. Depending on the GIS software that you use to make the calculation, flow direction can be encoded as an azimuth with valid values of <span class="math inline">\(FlowDir∈\{0,45,90,135,180,225,270,315,360\}\)</span> (16-bit integer) where 0 is reserved for undefined flow direction, but more commonly it is encoded as an 8-bit integer to save disk space for very large DEMs with valid values of <span class="math inline">\(FlowDir∈\{1,2,4,8,16,32,64,128,255\}\)</span> where 255 is reserved for undefined flow direction. Once we know the flow direction we can calculate the <strong>flow accumulation</strong>, which is a focal function tally of the number of upslope DEM cells that flow into the focal cell. Figure 9.X illustrates how flow direction and flow accumulation work together to model runoff over a DEM surface.</p>
<div class="figure">
<img src="images/09-00-flow-direction-accumulation.png" class="center" alt="" />
<p class="caption">Figure 9.X Flow direction shown in arrows and flow accumulation of upslope cells shown in numbers.</p>
</div>
<p>Trouble arises when there are two or more neighboring cells with the same minima (e.g., a peak or saddle). This situation can arise for very flat terrain where the elevation might be the same in nearly every direction. As we have already seen, sinks can cause water to flow into but not out of the focal cell, and therefore result in an undefined flow direction. Sinks must therefore be identified and filled in a DEM before calculating flow direction. There are several algorithms for filling sinks, but generally the process involves calculating flow direction and then moving downslope from the highest elevations of the DEM to the valley bottoms and identifying depressions, which are then filled. This process continues to iterate until no more depressions are identified (Marks et al 1984). Figure 9.X animates this iterative process of filling sinks in a cross-sectional profile of elevation, but the process is actually applied simultaneously over both geographic dimensions. Each iteration can introduce new sinks since the filling process directly modifies the DEM, so flow direction must be recalculated after each iteration in order to solve the next set of sinks. As a result, this filling process can be quite time consuming and usually stopping criteria are imposed such as a minimum depth threshold or a minimum slope for all cells in the DEM (i.e., no cells with flat slopes) to ensure that runoff is continuously downslope</p>
<div class="figure">
<img src="images/09-00-sink-fill.gif" class="center" alt="" />
<p class="caption">Figure 9.X Animated process of filling sinks in a DEM.</p>
</div>
</div>
<div id="flow-length" class="section level3">
<h3><span class="header-section-number">4.6.2</span> Flow length</h3>
</div>
<div id="stream-delineation" class="section level3">
<h3><span class="header-section-number">4.6.3</span> Stream delineation</h3>
</div>
<div id="stream-order" class="section level3">
<h3><span class="header-section-number">4.6.4</span> Stream order</h3>
</div>
<div id="pour-points" class="section level3">
<h3><span class="header-section-number">4.6.5</span> Pour points</h3>
</div>
<div id="watershed-delineation" class="section level3">
<h3><span class="header-section-number">4.6.6</span> Watershed delineation</h3>
</div>
<div id="topographic-wetness-index" class="section level3">
<h3><span class="header-section-number">4.6.7</span> Topographic wetness index</h3>
</div>
<div id="case-study-here" class="section level3">
<h3><span class="header-section-number">4.6.8</span> Case Study Here</h3>
</div>
</div>
<div id="geovisualization" class="section level2">
<h2><span class="header-section-number">4.7</span> Geovisualization</h2>
<div id="anaglyphs" class="section level3">
<h3><span class="header-section-number">4.7.1</span> Anaglyphs</h3>
<p><img src="images/09-00-baffin-island-mount-asgard.png" class="center" alt="Figure 9.X Anaglyph of Mount Asgard on Baffin Island, Nunavut, Canada. Imagery by MAXAR." />
<img src="images/09-00-baffin-island-mount-odin-1.png" class="center" alt="Figure 9.X Anaglyph of Mount Odin on Baffin Island, Nunavut, Canada. Imagery by MAXAR." />
<img src="images/09-00-ellesmere-island-2.png" class="center" alt="Figure 9.X Anaglyph of mountains on Ellesmere Island, Nunavut, Canada. Imagery by MAXAR." /></p>
</div>
<div id="viewsheds" class="section level3">
<h3><span class="header-section-number">4.7.2</span> Viewsheds</h3>
</div>
<div id="extrusion" class="section level3">
<h3><span class="header-section-number">4.7.3</span> Extrusion</h3>
</div>
<div id="exaggeration" class="section level3">
<h3><span class="header-section-number">4.7.4</span> Exaggeration</h3>
</div>
<div id="lighting-and-shadowing" class="section level3">
<h3><span class="header-section-number">4.7.5</span> Lighting and shadowing</h3>
</div>
<div id="symbologies-for-relief" class="section level3">
<h3><span class="header-section-number">4.7.6</span> Symbologies for relief</h3>
</div>
</div>
<div id="summary-3" class="section level2">
<h2><span class="header-section-number">4.8</span> Summary</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut in dolor nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent et augue scelerisque, consectetur lorem eu, auctor lacus. Fusce metus leo, aliquet at velit eu, aliquam vehicula lacus. Donec libero mauris, pharetra sed tristique eu, gravida ac ex. Phasellus quis lectus lacus. Vivamus gravida eu nibh ac malesuada. Integer in libero pellentesque, tincidunt urna sed, feugiat risus. Sed at viverra magna. Sed sed neque sed purus malesuada auctor quis quis massa.</p>
<div id="reflection-questions-2" class="section level3 unnumbered">
<h3>Reflection Questions</h3>
<ol style="list-style-type: decimal">
<li>Explain ipsum lorem.</li>
<li>Define ipsum lorem.</li>
<li>What is the role of ispum lorem?</li>
<li>How does ipsum lorem work?</li>
</ol>
</div>
<div id="practice-questions-2" class="section level3 unnumbered">
<h3>Practice Questions</h3>
<ol start="2" style="list-style-type: decimal">
<li>Given ipsum, solve for lorem.</li>
<li>Draw ipsum lorem.</li>
</ol>
</div>
</div>
<div id="recommended-readings-2" class="section level2 unnumbered">
<h2>Recommended Readings</h2>
<p>Ensure all inline citations are properly referenced here.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="network-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="LiDAR-acquisition-and-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
